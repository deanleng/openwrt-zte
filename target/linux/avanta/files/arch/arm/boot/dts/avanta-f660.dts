/*
 * Device Tree file for zte f660
 * 
 *   (c) 2021 winnt5 <jiconglu58@gmail.com>
 *
 * based on
 *
 * Copyright (c) 2021 bodhi <mibodhi@gmail.com>
 *
 * based on 
 *  (c) 2015 Claudio Leite <leitec@staticky.com>
 *
 * based on kirkwood-ea4500.dts,
 *   (c) 2013 Jonas Gorski <jogo@openwrt.org>
 *   (c) 2013 Deutsche Telekom Innovation Laboratories
 *   (c) 2014 Luka Perkov <luka@openwrt.org>
 *
 * This file is licensed under the terms of the GNU General Public
 * License version 2.  This program is licensed "as is" without any
 * warranty of any kind, whether express or implied.
 */

/dts-v1/;

#include "avanta.dtsi"
#include "avanta-6560.dtsi"

/ {
	model = "ZTE F660";
	compatible = "zte,f660", "marvell,kirkwood-88f6282", "marvell,kirkwood";

	memory {
		device_type = "memory";
		reg = <0x00000000 0x8000000>;
	};

	chosen {
		bootargs = "console=ttyS0,115200n8 earlyprintk";
	};

	ocp@f1000000 {
		rtc@10300 {
			status = "disabled";
		};

		serial@12000 {
			status = "okay";
		};
	};

	gpio-leds {
		compatible = "gpio-leds";

		red-warn {
			label = "f660:red:warn";
			gpios = <&gpio0 17 GPIO_ACTIVE_LOW>;
		};

		green-voice1 {
			label = "f660:green:voice1";
			gpios = <&gpio0 21 GPIO_ACTIVE_LOW>;
		};

		green-ponnetwork {
			label = "f660:green:ponnetwork";
			gpios = <&gpio1 17 GPIO_ACTIVE_LOW>;
		};

		red-ponport {
			label = "f660:red:ponport";
			gpios = <&gpio1 18 GPIO_ACTIVE_LOW>;
		};

		green-voice2 {
			label = "f660:green:voice2";
			gpios = <&gpio1 20 GPIO_ACTIVE_LOW>;
		};

		red-wps {
			label = "f660:red:wps";
			gpios = <&gpio2 11 GPIO_ACTIVE_LOW>;
		};

		green-wps {
			label = "f660:green:wps";
			gpios = <&gpio2 12 GPIO_ACTIVE_LOW>;
		};

		green-usb {
			label = "f660:green:usb";
			gpios = <&gpio2 13 GPIO_ACTIVE_LOW>;
		};
	};

	gpio_keys {
		compatible = "gpio-keys";

		button@13 {
			label = "reset";
			linux,code = <KEY_RESTART>;
			gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;
		};

		button@8 {
			label = "wireless";
			linux,code = <KEY_WLAN>;
			gpios = <&gpio2 8 GPIO_ACTIVE_LOW>;
		};

		button@9 {
			label = "wps";
			linux,code = <KEY_WPS_BUTTON>;
			gpios = <&gpio2 9 GPIO_ACTIVE_LOW>;
		};
	};

	mvsw6171 {
		compatible = "marvell,88e6171";
		status = "okay";
		reg = <0x8>;

		mii-bus = <&mdio>;
		cpu-port-0 = <4>;
		cpu-port-1 = <5>;
		is-indirect;
	};
};

&nand {
	status = "okay";

	partition@0 {
		label = "u-boot";
		reg = <0 0x100000>;
	};

	partition@100000 {
		label = "kernel";
		reg = <0x100000 0x300000>;
	};

	partition@400000 {
		label = "ubi";
		reg = <0x400000 0x1c00000>;
	};
};

&pciec {
	status = "okay";
};

&pcie1 {
	status = "okay";
};

&mdio {
	status = "okay";
/*
	switch@8 {
		compatible = "marvell,mv88e6085";
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <8>;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				label = "lan1";
			};

			port@1 {
				reg = <1>;
				label = "lan2";
			};

			port@2 {
				reg = <2>;
				label = "lan3";
			};

			port@3 {
				reg = <3>;
				label = "lan4";
			};

			port@4 {
				reg = <4>;
				label = "cpu";
				ethernet = <&eth0>;
				fixed-link {
					speed = <1000>;
					full-duplex;
				};
			};
		};
	};
*/
};

/* eth0	 is connected to a Marvell 88F6560 internal switch, without a PHY. So set
 * fixed speed and duplex.
 */
&eth0 {
	status = "okay";
	phy-mode = "gmii";
	fixed-link {
		speed = <1000>;
		full-duplex;
	};
};
